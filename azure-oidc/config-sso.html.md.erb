---
title: Configuring an OIDC Service Provider in SSO
owner: Identity Service
---

This topic describes how to add an OpenID Connect (OIDC) external identity
provider to your Pivotal Single Sign-On (SSO) service plan, using Azure Active
Directory (Azure AD) as an example.

## <a id="set-up-OIDC"></a> Set Up the OIDC Identity Provider in SSO

Follow the steps below to set up an OIDC provider for the SSO service.

1. Follow steps 1&ndash;6 in [Add an OIDC Provider](../configure-internal-us.html#config-ext-oidc).

1. Clear the **Enable Discovery** checkbox and enter the following information from the **OpenID Connect metadata endpoint** you constructed at the end of the [previous section](./config-azure.html#relying).
  - For **Authorization Endpoint URL**, enter in the `authorization_endpoint` value from the metadata endpoint.
  - For **Token Endpoint URL**, enter the `token_endpoint` value from the metadata endpoint.
  - For **Token Key**, enter the `jwks_uri` value from the metadata endpoint.
  - For **Issuer**, enter the `issuer` value from the metadata endpoint.
  - For **User Info Endpoint URL**, enter the `userinfo_endpoint` value from the metadata endpoint.
  - For **Response Type**, select `id_token`.
  - For **Relying Party OAuth Client ID**, enter the **Application ID** value recorded from the previous section.
  - For **Relying Party OAuth Client Secret**, enter the **Client Secret** value recorded in the previous section.

	<%= image_tag '../images/azure-oidc-settings.png' %>

1. Select `openid` as a scope. You can select additional scopes.

	<%= image_tag '../images/azure-oidc-scopes.png' %>

1. Under **Advanced Settings** &gt **User Attributes**, map `user_name` to `unique_name`. This enables SSO to identify the authenticated user.

1. (Optional) Configure additional attribute mappings.

1. Click **Create Identity Provider** to save your settings.

1. (Optional) [Enable identity provider discovery](../idp-discovery.html#how-to) for the service plan.
